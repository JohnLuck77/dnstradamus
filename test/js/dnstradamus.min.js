/* dnstradamus.js v1.0.0 */
var dnstradamus=function(){"use strict";function _extends(){return(_extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var e=function(e){return[].slice.call(e)};function getOriginFromHref(e){var n=e.split("/");return n[0]+"//"+n[2]+"/"}function buildLinkTag(e){var n=document.createElement("link");n.setAttribute("rel","dns-prefetch"),n.setAttribute("href",e),n.setAttribute("crossorigin","anonymous"),document.head.appendChild(n)}return function(n){var t=_extends({context:"body",include:function(e,n){return!0},threshold:200,timeout:4e3,effectiveTypes:["3g","4g"],observeChanges:!1,observeRoot:"body",bailIfSlow:!0},n),r=t.context+' a[href^="http://"],a[href^="https://"]',o="connection"in navigator&&navigator.connection.saveData,i="connection"in navigator?navigator.connection.effectiveType:"4g",c=[],a=!0===t.bailIfSlow&&(!0===o||-1===t.effectiveTypes.indexOf(i));if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&!1===a){var s=new IntersectionObserver(function(e,n){e.forEach(function(e){if(!0===e.isIntersecting||e.intersectionRatio>0){var r=e.target,o=getOriginFromHref(r.href);-1===c.indexOf(o)&&-1===o.indexOf(document.location.protocol+"//"+document.location.host)&&!0===t.include(r,o)&&(t.timeout>0&&"requestIdleCallback"in window?requestIdleCallback(function(){return buildLinkTag(o)},{timeout:t.timeout}):buildLinkTag(o),c.push(o)),n.unobserve(r),anchors=anchors.filter(function(e){return e!==r})}})},{rootMargin:t.threshold+"px 0%"});e(document.querySelectorAll(r)).forEach(function(e){return s.observe(e)}),"MutationObserver"in window&&!0===t.observeChanges&&new MutationObserver(function(n){return n.forEach(function(){e(document.querySelectorAll(r)).forEach(function(e){-1===anchors.indexOf(e)&&-1===c.indexOf(getOriginFromHref(e.href))&&(anchors.push(e),s.observe(e))})})}).observe(document.querySelector(t.observeRoot),{childList:!0,subtree:!0})}}}();
