/* dnstradamus.js v1.0.1 */
var dnstradamus=function(){"use strict";function _extends(){return(_extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var e=function(e){return[].slice.call(e)};function getOriginFromHref(e){var n=e.split("/");return n[0]+"//"+n[2]+"/"}function buildLinkTag(e){var n=document.createElement("link");n.rel="dns-prefetch",n.href=e,n.crossOrigin="anonymous",document.head.appendChild(n)}return function(n){var t=_extends({context:"body",include:function(e,n){return!0},timeout:4e3,observeChanges:!1,observeRoot:"body",bailIfSlow:!1},n),r=t.context+' a[href^="http://"],a[href^="https://"]',o="connection"in navigator&&navigator.connection.saveData,i="connection"in navigator?navigator.connection.effectiveType:"4g",c=!0===t.bailIfSlow&&(!0===o||!0===/^(3|4)g$/i.test(i));if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&!1===c){var u=[],a=new IntersectionObserver(function(e,n){e.forEach(function(e){if(!0===e.isIntersecting){var r=e.target,o=getOriginFromHref(r.href);-1===u.indexOf(o)&&-1===o.indexOf(document.location.protocol+"//"+document.location.host)&&!0===t.include(r,o)&&(t.timeout>0&&"requestIdleCallback"in window?requestIdleCallback(function(){return buildLinkTag(o)},{timeout:t.timeout}):buildLinkTag(o),u.push(o)),n.unobserve(r),s=s.filter(function(e){return e!==r})}})}),s=e(document.querySelectorAll(r));s.forEach(function(e){return a.observe(e)}),"MutationObserver"in window&&!0===t.observeChanges&&new MutationObserver(function(n){return n.forEach(function(){e(document.querySelectorAll(r)).forEach(function(e){-1===s.indexOf(e)&&-1===u.indexOf(getOriginFromHref(e.href))&&(s.push(e),a.observe(e))})})}).observe(document.querySelector(t.observeRoot),{childList:!0,subtree:!0})}}}();
